{"version":3,"file":"backbone.blazer.min.js","sources":["backbone.blazer.js"],"names":["root","factory","exports","module","require","define","amd","$","_","Backbone","this","Blazer","Route","options","extend","result","initialize","apply","arguments","Model","prototype","Events","destroy","stopListening","prepare","execute","error","canNavigate","redirect","fragment","redirectFragment","prependFilter","before","after","filters","filter","Router","createFilter","isEmpty","unshift","appendFilter","push","constructor","namedRoutes","routeHandlers","handlers","route","routeName","config","length","isString","replace","toLowerCase","console","warn","isRegExp","_routeToRegExp","router","routeData","handler","has","name","url","params","defaults","parameters","isArray","isObject","getUrl","routeHandler","_extractParameters","args","segment","key","object","slice","handleRoute","callback","history","executeRoute","executeUrl","any","test","navigate","previous","current","call","navigateTo","get","done","trigger","concat","isFunction","_handleBlazerRoute","Error","path","flatten","rest","index","match","isUndefined","isNull","matchesUrl","matchesRoute","isAncestor","indexOf","ancestors","nodes","segments","split","join","pop","reverse","each","keys","bind","siblings","nomatch","active","_runBeforeFilters","then","_runHandler","_runAfterFilters","fail","Array","errorHandled","_runFilters","which","stageFilters","compact","pluck","def","Deferred","chain","reduce","resolve","promise","reject","when","registerFilter","filterName","fn","beforeRoute","afterRoute"],"mappings":"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"}