{"version":3,"file":"backbone.blazer.min.js","sources":["backbone.blazer.js"],"names":["root","factory","exports","module","require","define","amd","$","_","Backbone","this","Blazer","Route","options","extend","result","initialize","apply","arguments","Model","prototype","Events","destroy","stopListening","prepare","execute","error","canNavigate","redirect","fragment","redirectFragment","prependFilter","before","after","filters","filter","Router","createFilter","isEmpty","unshift","appendFilter","push","SubRouter","constructor","router","ctx","executeUrl","parameters","path","route","routeName","config","namedRoutes","routeHandlers","handlers","length","isString","replace","toLowerCase","console","warn","isRegExp","_routeToRegExp","routeData","handler","has","name","url","params","defaults","isArray","isObject","getUrl","routeHandler","_extractParameters","args","segment","key","object","slice","handleRoute","callback","history","section","executeRoute","any","test","navigate","previous","current","call","navigateTo","get","rest","concat","done","trigger","isFunction","_handleBlazerRoute","Error","flatten","index","match","isUndefined","isNull","matchesUrl","matchesRoute","isAncestor","indexOf","ancestors","nodes","segments","split","join","pop","reverse","each","keys","bind","siblings","nomatch","active","_runBeforeFilters","then","_runHandler","_runAfterFilters","fail","Array","errorHandled","_runFilters","which","stageFilters","compact","pluck","def","Deferred","chain","reduce","resolve","promise","reject","when","registerFilter","filterName","fn","beforeRoute","afterRoute"],"mappings":"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"}