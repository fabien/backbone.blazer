{"version":3,"file":"backbone.blazer.min.js","sources":["backbone.blazer.js"],"names":["root","factory","exports","module","require","define","amd","$","_","Backbone","this","Blazer","Route","options","extend","result","initialize","apply","arguments","Model","prototype","Events","destroy","stopListening","prepare","execute","error","canNavigate","redirect","fragment","redirectFragment","prependFilter","before","after","filters","filter","Router","createFilter","isEmpty","unshift","appendFilter","push","constructor","namedRoutes","routeHandlers","route","routeName","config","length","isString","replace","toLowerCase","console","warn","isRegExp","_routeToRegExp","routeData","handler","router","has","name","url","params","defaults","parameters","isArray","isObject","get","history","_extractParameters","args","segment","key","object","slice","handleRoute","navigate","previous","current","call","navigateTo","getUrl","done","trigger","concat","isFunction","_handleBlazerRoute","Error","path","flatten","rest","index","match","isUndefined","isNull","matchesUrl","matchesRoute","isAncestor","indexOf","ancestors","nodes","segments","split","join","pop","reverse","each","keys","bind","siblings","nomatch","active","callback","_runBeforeFilters","then","_runHandler","_runAfterFilters","fail","Array","errorHandled","_runFilters","which","stageFilters","compact","pluck","def","Deferred","chain","reduce","resolve","promise","reject","when","registerFilter","filterName","fn","beforeRoute","afterRoute"],"mappings":"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"}