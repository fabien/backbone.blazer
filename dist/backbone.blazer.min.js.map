{"version":3,"file":"backbone.blazer.min.js","sources":["backbone.blazer.js"],"names":["root","factory","exports","module","require","define","amd","$","_","Backbone","this","Blazer","Route","options","extend","result","initialize","apply","arguments","Model","prototype","Events","destroy","stopListening","prepare","execute","error","redirect","fragment","redirectFragment","prependFilter","before","after","filters","filter","Router","createFilter","isEmpty","unshift","appendFilter","push","constructor","namedRoutes","routeHandlers","route","routeName","config","length","isString","replace","toLowerCase","console","warn","isRegExp","_routeToRegExp","routeData","handler","router","has","name","url","params","defaults","parameters","isArray","isObject","get","history","_extractParameters","args","segment","key","object","slice","handleRoute","navigateTo","navigate","done","current","trigger","concat","previous","isFunction","_handleBlazerRoute","Error","path","flatten","rest","index","match","isUndefined","matchesUrl","indexOf","matchesRoute","ancestors","nodes","segments","split","join","pop","reverse","each","keys","bind","siblings","nomatch","active","callback","_runBeforeFilters","then","_runHandler","_runAfterFilters","fail","Array","call","errorHandled","_runFilters","which","stageFilters","compact","pluck","def","Deferred","chain","reduce","resolve","promise","reject","when","registerFilter","filterName","fn","beforeRoute","afterRoute"],"mappings":"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"}